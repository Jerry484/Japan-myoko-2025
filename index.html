<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬æ»‘é›ªè·¨å¹´è¡Œç¨‹ 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .timeline-line { position: absolute; left: 1.25rem; top: 0; bottom: 0; width: 2px; background-color: #e5e7eb; z-index: 0; }
        
        /* Markdown Styles */
        .prose p { margin-bottom: 0.5em; }
        .prose ul { list-style-type: disc; padding-left: 1.2em; margin-bottom: 0.5em; }
        
        /* Image Toggle Transition */
        .img-box { transition: all 0.3s ease; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 pb-20">

    <nav class="bg-blue-900 text-white sticky top-0 z-50 shadow-lg">
        <div class="max-w-4xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="font-bold text-lg"><i class="fa-solid fa-snowflake mr-2"></i>Japan Trip 2025</div>
            <div class="text-xs bg-blue-800 px-2 py-1 rounded">12/25 - 12/31</div>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto px-4 py-6 space-y-6">

        <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded shadow-sm">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <i class="fa-solid fa-triangle-exclamation text-red-500 mt-1"></i>
                </div>
                <div class="ml-3 w-full">
                    <h3 class="text-lg font-bold text-red-800">âš ï¸ åœ–ç‰‡ä¸Šå‚³æé†’</h3>
                    <p class="text-sm text-red-700 mb-2">è«‹ç¢ºä¿å·²å°‡åœ–ç‰‡ä¸Šå‚³è‡³ GitHubï¼Œä¸¦ä½¿ç”¨ä»¥ä¸‹æª”åï¼š<code>fig_a.png</code>, <code>fig_1.png</code>, <code>fig_2.png</code>...</p>
                    <h3 class="text-lg font-bold text-red-800 mt-2">âš ï¸ ç·Šæ€¥å¾…è¾¦äº‹é …</h3>
                    <ul class="space-y-2 text-sm mt-1">
                        <li class="flex items-center justify-between bg-white p-2 rounded border border-red-100">
                            <span><strong class="text-red-600">æ–°å¹¹ç·šè»Šç¥¨ (æ±äº¬ â†” é•·é‡)</strong><br>è«‹ä¾ç…§ Day 3 å’Œ Day 7 çš„æŒ‡å®šç­æ¬¡é ç´„ã€‚</span>
                            <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded font-bold">11/27 é–‹è³£</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <div class="flex overflow-x-auto bg-slate-100 border-b scrollbar-hide">
                <button onclick="openTab(event, 'day1')" class="tab-btn px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 border-transparent text-slate-500 hover:text-blue-600">Day 1 (12/25)</button>
                <button onclick="openTab(event, 'day2')" class="tab-btn px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 border-transparent text-slate-500 hover:text-blue-600">Day 2 (12/26)</button>
                <button onclick="openTab(event, 'day3')" class="tab-btn px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 border-blue-600 text-blue-600 bg-white">Day 3 (12/27)</button>
                <button onclick="openTab(event, 'day4')" class="tab-btn px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 border-transparent text-slate-500 hover:text-blue-600">Day 4-6 (Ski)</button>
                <button onclick="openTab(event, 'day7')" class="tab-btn px-4 py-3 text-sm font-medium whitespace-nowrap border-b-2 border-transparent text-red-500 font-bold hover:text-red-600">Day 7 (12/31)âš ï¸</button>
            </div>

            <div class="p-4 min-h-[400px]">
                
                <div id="day1" class="tab-content">
                    <h2 class="text-xl font-bold mb-4">Day 1: æŠµé”æ±äº¬</h2>
                    <p class="text-sm text-slate-500">è«‹åƒè€ƒåŸæœ‰è¡Œç¨‹...</p>
                </div>

                <div id="day2" class="tab-content">
                     <h2 class="text-xl font-bold mb-4">Day 2: ä¸Šé‡è³¼ç‰©</h2>
                     <p class="text-sm text-slate-500">è«‹åƒè€ƒåŸæœ‰è¡Œç¨‹...</p>
                </div>

                <div id="day3" class="tab-content active">
                    <h2 class="text-xl font-bold mb-4 flex items-center"><i class="fa-solid fa-train mr-2 text-blue-500"></i>Day 3: å‰å¾€é•·é‡èˆ‡å¦™é«˜</h2>
                    <div class="relative pl-8 space-y-8">
                        <div class="timeline-line"></div>
                        
                        <div class="relative">
                            <div class="absolute -left-10 bg-slate-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">10:00</div>
                            <div class="font-bold">Checkout & é›†åˆ</div>
                            <p class="text-sm">Nippori Hotel é€€æˆ¿ã€‚åŒ¯åˆ Venus å’Œ Honã€‚</p>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-10 bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold"><i class="fa-solid fa-utensils"></i></div>
                            <div class="font-bold">12:00 - 14:00 åˆé¤</div>
                            <p class="text-sm">æ±äº¬/ä¸Šé‡å‘¨é‚Šåˆé¤ã€‚</p>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-10 bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">1</div>
                            <div class="font-bold text-blue-800">ç¬¬ä¸€éšæ®µï¼šæ–°å¹¹ç·š (ä¸Šé‡ â” é•·é‡)</div>
                            
                            <div class="bg-blue-50 p-3 rounded mt-2 border border-blue-100">
                                <p class="text-sm"><strong>æ™‚é–“ï¼š</strong>14:38 ä¸Šé‡ (UENO) â” 16:06 é•·é‡ (NAGANO)</p>
                                
                                <button onclick="toggleImage('fig-a')" class="mt-2 text-xs bg-white border border-blue-300 text-blue-600 px-3 py-1.5 rounded-full font-bold shadow-sm hover:bg-blue-50 transition flex items-center gap-1 w-full sm:w-auto justify-center">
                                    <i class="fa-regular fa-image"></i> æŸ¥çœ‹è»Šæ¬¡è©³æƒ… (Fig A)
                                </button>
                                
                                <div id="fig-a" class="hidden mt-2">
                                    <div class="bg-white p-2 rounded shadow border border-slate-200">
                                        <img src="fig_a.png" alt="Fig A: æ–°å¹¹ç·šè»Šæ¬¡" class="w-full rounded">
                                        <p class="text-[10px] text-center text-slate-400 mt-1">Fig A</p>
                                    </div>
                                </div>
                            </div>
                            
                            <p class="text-sm text-slate-600 mt-2"><i class="fa-solid fa-mug-hot"></i> <strong>ä¼‘æ¯ï¼š</strong>æŠµé”é•·é‡å¾Œæœ‰ç´„ 1 å°æ™‚ç©ºæª”ï¼Œå¯è²·ä¼´æ‰‹ç¦®ã€‚</p>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-10 bg-green-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">2</div>
                            <div class="font-bold text-green-800">ç¬¬äºŒéšæ®µï¼šä¿¡æ¿ƒéµé“ (é•·é‡ â” å¦™é«˜)</div>
                            
                            <div class="bg-green-50 p-3 rounded mt-2 border border-green-100">
                                <p class="text-sm"><strong>è»Šæ¬¡ï¼š</strong>17:06 é•·é‡å‡ºç™¼ â” 17:52 æŠµé” å¦™é«˜é«˜åŸ</p>
                                <p class="text-sm"><strong>è»Šè³‡ï¼š</strong>850 æ—¥åœ“ (éœ€è³¼å¯¦é«”ç¥¨)</p>

                                <button onclick="toggleImage('fig-1')" class="mt-2 text-xs bg-white border border-green-300 text-green-600 px-3 py-1.5 rounded-full font-bold shadow-sm hover:bg-green-50 transition mb-2">
                                    <i class="fa-regular fa-map"></i> å®˜æ–¹è·¯ç·šåœ– (Fig 1)
                                </button>
                                <div id="fig-1" class="hidden mb-3">
                                    <div class="bg-white p-2 rounded shadow border border-slate-200">
                                        <img src="fig_1.png" alt="Fig 1: å®˜æ–¹è·¯ç·š" class="w-full rounded">
                                    </div>
                                </div>

                                <div class="border-t border-green-200 pt-2 mt-1">
                                    <p class="text-sm font-bold text-green-900 mb-2">ã€ä¿¡æ¿ƒéµé“ä¹˜è»Šæ­¥é©ŸæŒ‡å—ã€‘</p>
                                    
                                    <button onclick="toggleImage('guide-steps')" class="w-full text-left bg-white border border-green-300 text-green-700 px-3 py-2 rounded-lg shadow-sm hover:bg-green-50 transition flex justify-between items-center text-sm font-bold">
                                        <span><i class="fa-solid fa-shoe-prints mr-1"></i> é»æ“ŠæŸ¥çœ‹è©³ç´°è½‰ä¹˜åœ–æ–‡æ­¥é©Ÿ</span>
                                        <i class="fa-solid fa-chevron-down"></i>
                                    </button>

                                    <div id="guide-steps" class="hidden mt-2 space-y-3 bg-white p-3 rounded border border-slate-200">
                                        
                                        <div class="text-sm">
                                            <span class="bg-slate-200 text-slate-700 px-1.5 rounded text-xs font-bold">Step 1</span>
                                            <strong>å°‹æ‰¾å…¥å£ï¼š</strong>é•·é‡ç«™å‡ºå£å±¤å³æ–¹ï¼Œæ¨™ç¤º "Myoko-Kogen"ã€‚
                                            <div class="mt-1"><img src="fig_2.png" alt="Fig 2: å…¥å£" class="rounded border w-full"></div>
                                        </div>

                                        <div class="text-sm">
                                            <span class="bg-slate-200 text-slate-700 px-1.5 rounded text-xs font-bold">Step 2</span>
                                            <strong>è³¼ç¥¨ï¼š</strong>å…¥å£å³å´è‡ªå‹•å”®ç¥¨æ©Ÿã€‚
                                            <div class="mt-1"><img src="fig_3.png" alt="Fig 3: å”®ç¥¨æ©Ÿ" class="rounded border w-full"></div>
                                        </div>

                                        <div class="text-sm">
                                            <span class="bg-slate-200 text-slate-700 px-1.5 rounded text-xs font-bold">Step 3</span>
                                            <strong>ç¢ºèªé‡‘é¡ï¼š</strong>é¸æ“‡å¾€ã€Œå¦™é«˜é«˜åŸã€(850å††)ã€‚
                                            <div class="mt-1"><img src="fig_5.png" alt="Fig 5: ç¥¨åƒ¹" class="rounded border w-full"></div>
                                        </div>

                                        <div class="text-sm">
                                            <span class="bg-slate-200 text-slate-700 px-1.5 rounded text-xs font-bold">Step 4</span>
                                            <strong>å‰å¾€æœˆå°ï¼š</strong>é€šå¸¸åœ¨ç¬¬ 7 æœˆå°ã€‚
                                            <div class="mt-1"><img src="fig_6.png" alt="Fig 6: æœˆå°" class="rounded border w-full"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-10 bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">3</div>
                            <div class="font-bold text-purple-800">æŠµé”èˆ‡æ¥é§</div>
                            <ul class="text-sm mt-1 list-disc list-inside">
                                <li><strong>18:00</strong> é£¯åº—æ¥é§è»Š (Hotel Taiko Shuttle) æ–¼å¦™é«˜é«˜åŸç«™æ¥äººã€‚</li>
                                <li><strong>18:10</strong> æŠµé” Hotel Taikoã€‚</li>
                            </ul>
                        </div>

                    </div>
                </div>

                <div id="day4" class="tab-content">
                    <h2 class="text-xl font-bold mb-4">Day 4-6: æ»‘é›ª</h2>
                    <p class="text-sm text-slate-500">è«‹åƒè€ƒåŸæœ‰è¡Œç¨‹...</p>
                </div>

                <div id="day7" class="tab-content">
                    <h2 class="text-xl font-bold mb-4 flex items-center text-red-600"><i class="fa-solid fa-plane-departure mr-2"></i>Day 7: å›ç¨‹ (12/31)</h2>
                    
                    <div class="relative pl-8 space-y-8">
                        <div class="timeline-line"></div>

                        <div class="relative">
                            <div class="absolute -left-10 bg-slate-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">08:50</div>
                            <div class="font-bold">é›¢é–‹é£¯åº—</div>
                            <p class="text-sm">æ¥é§è»Š/è¨ˆç¨‹è»Šå¾ Hotel Taiko å‡ºç™¼ â” 09:00 æŠµé”å¦™é«˜é«˜åŸç«™ã€‚</p>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-10 bg-green-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">09:08</div>
                            <div class="font-bold">ä¿¡æ¿ƒéµé“ (å¾€é•·é‡)</div>
                            <p class="text-sm">09:08 å¦™é«˜é«˜åŸ â” 09:52 é•·é‡ç«™ã€‚</p>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-10 bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">10:26</div>
                            <div class="font-bold text-blue-800">æ–°å¹¹ç·š (é•·é‡ â” æ±äº¬)</div>
                            
                            <div class="bg-blue-50 p-3 rounded mt-2 border border-blue-100">
                                <p class="text-sm"><strong>è»Šæ¬¡ï¼š</strong>Kagayaki 524 (å…¨è»ŠæŒ‡å®šå¸­)</p>
                                <p class="text-sm"><strong>æ™‚é–“ï¼š</strong>10:26 é•·é‡ â” 11:52 æ±äº¬</p>
                                <p class="text-xs text-red-500 font-bold mt-1">âš ï¸ è«‹å‹™å¿…æå‰é ç´„æ­¤ç­æ¬¡ï¼</p>
                                
                                <button onclick="toggleImage('fig-b')" class="mt-2 text-xs bg-white border border-blue-300 text-blue-600 px-3 py-1.5 rounded-full font-bold shadow-sm hover:bg-blue-50 transition flex items-center gap-1 w-full sm:w-auto justify-center">
                                    <i class="fa-regular fa-image"></i> æŸ¥çœ‹å›ç¨‹è»Šæ¬¡ (Fig B)
                                </button>
                                
                                <div id="fig-b" class="hidden mt-2">
                                    <div class="bg-white p-2 rounded shadow border border-slate-200">
                                        <img src="fig_b.png" alt="Fig B: å›ç¨‹æ–°å¹¹ç·š" class="w-full rounded">
                                        <p class="text-[10px] text-center text-slate-400 mt-1">Fig B</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="relative">
                            <div class="absolute -left-10 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold"><i class="fa-solid fa-road"></i></div>
                            <div class="font-bold">å‰å¾€æˆç”°æ©Ÿå ´ (NRT)</div>
                            <div class="mt-2 space-y-2">
                                <div class="bg-white p-2 border rounded border-l-4 border-l-blue-500 shadow-sm">
                                    <p class="text-sm font-bold text-blue-700">é¸é … A (æ¨è–¦ - æœ€å¿«)</p>
                                    <p class="text-xs">åœ¨<strong>ã€Œä¸Šé‡ç«™ã€</strong>ä¸‹è»Š (11:47) â” æ­¥è¡Œè‡³äº¬æˆä¸Šé‡ç«™ â” è½‰ä¹˜ Skylinerã€‚</p>
                                </div>
                                <div class="bg-white p-2 border rounded border-l-gray-400 shadow-sm">
                                    <p class="text-sm font-bold text-gray-700">é¸é … B</p>
                                    <p class="text-xs">åœ¨<strong>ã€Œæ±äº¬ç«™ã€</strong>ä¸‹è»Š (11:52) â” è½‰ä¹˜ æˆç”°ç‰¹å¿« N'EX æˆ– å·´å£«ã€‚</p>
                                </div>
                                <p class="text-sm font-bold text-red-700 mt-2">ğŸ¯ ç›®æ¨™ï¼š13:00 - 13:30 å¿…é ˆæŠµé”æ©Ÿå ´ï¼</p>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
        
        <div class="text-center text-xs text-slate-400 mt-8 pb-8">
            <p>Generated by Jerry.</p>
        </div>
    </div>

    <button onclick="toggleAiModal()" class="fixed bottom-6 right-6 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-full p-4 shadow-xl z-50 transition-transform transform hover:scale-110 flex items-center justify-center w-16 h-16">
        <i class="fa-solid fa-wand-magic-sparkles text-2xl"></i>
    </button>

    <div id="ai-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-end sm:items-center justify-center p-0 sm:p-4">
        <div class="bg-white w-full sm:max-w-md h-[80vh] sm:h-[600px] rounded-t-2xl sm:rounded-2xl shadow-2xl flex flex-col overflow-hidden relative">
            <div class="bg-gradient-to-r from-blue-900 to-indigo-900 p-4 text-white flex justify-between items-center">
                <div class="flex items-center gap-2"><i class="fa-solid fa-robot"></i><h3 class="font-bold">æ—¥æœ¬æ—…éŠéš¨èº« AI</h3></div>
                <button onclick="toggleAiModal()" class="text-white hover:text-gray-300"><i class="fa-solid fa-xmark text-xl"></i></button>
            </div>
            <div id="chat-output" class="flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50">
                 </div>
            <div class="p-4 bg-white border-t border-slate-200">
                <div class="flex gap-2">
                    <input type="text" id="user-input" placeholder="è¼¸å…¥å•é¡Œ..." class="flex-1 border border-slate-300 rounded-lg px-4 py-2 text-sm">
                    <button onclick="sendChat()" class="bg-blue-600 text-white rounded-lg px-4 py-2"><i class="fa-solid fa-paper-plane"></i></button>
                </div>
            </div>
            <div id="ai-loading" class="absolute inset-0 bg-white bg-opacity-80 flex flex-col items-center justify-center hidden">
                <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-3"></div><div class="text-blue-600 font-bold text-sm">AI æ€è€ƒä¸­...</div>
            </div>
        </div>
    </div>

    <script>
        // --- Image Toggle Logic (New) ---
        function toggleImage(id) {
            const element = document.getElementById(id);
            if (element.classList.contains('hidden')) {
                element.classList.remove('hidden');
            } else {
                element.classList.add('hidden');
            }
        }

        // --- Tab Logic ---
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            tablinks = document.getElementsByClassName("tab-btn");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("text-blue-600", "border-blue-600", "bg-white", "text-red-600", "border-red-600");
                if(tablinks[i].textContent.includes('Day 7')) {
                    tablinks[i].classList.add("text-red-500", "border-transparent");
                } else {
                    tablinks[i].classList.add("text-slate-500", "border-transparent");
                }
            }
            document.getElementById(tabName).classList.add("active");
            const activeBtn = evt.currentTarget;
            activeBtn.classList.remove("text-slate-500", "border-transparent", "text-red-500");
            
            if(tabName === 'day7') {
                 activeBtn.classList.add("text-red-600", "border-red-600", "bg-white");
            } else {
                 activeBtn.classList.add("text-blue-600", "border-blue-600", "bg-white");
            }
        }

        // --- Gemini AI Logic (Keep your existing key and logic) ---
        const apiKey = "PASTE_YOUR_API_KEY_HERE"; 
        
        // (Include the rest of your JS functions: callGeminiAPI, sendChat, etc. here)
        // ...
        async function callGeminiAPI(userQuery) {
            // ... (Use previous logic)
        }
        async function sendChat() {
            // ... (Use previous logic)
        }
    </script>
</body>
</html>
